<!DOCTYPE HTML>
<html>
<head>
    <style>
        .place{
             width: 50px;
             height: 43px;
             text-align: center;
             border: 3px solid black;
             background-color: #53706f;
         }
         #mainBody{
             float: left;
             width: 60%;
             height: 80%;
             margin: 10px;
             margin: 10px;
             padding: 10px;
             border: 3px solid #618243;
             background-color: #618685;
             position: absolute;
             left: 21%;
             top: 10%;
         }
         .text{
             position: relative;
             font-size: 30px;
             left: 22%;
             top: 10%;
             color: #ffeaea;
             font-family: Whitney,Helvetica Neue,Helvetica,Arial,sans-serif;
        }
         .button{
             position: absolute;
             left: 15%;
             top: 80%;
             width: 34%;
             height: 9%;
             font-size: 40px;
             background-color: #7289da;
             border-radius: 3px;
             color: #fff;
         }
        .selection{
            float: left;
            position:absolute;
            left: 6%;
            top: 10%;
            width: 252px;
            height: 80%;
            margin: 10px;
            padding: 10px;
            border: 3px solid #f24343;
            background-color: #a54545;
        }
        .drag {
            text-align: center;
            font-size: 30px;
            border: 1px dashed cornflowerblue;
            width: 50px;
            height: 45px;
            color: #eaeff7;
            font-family: Whitney,Helvetica Neue,Helvetica,Arial,sans-serif;
        }
    </style>
    <script>

        var text = '{"value":"place holder", "placement":"place holder"}';
        var count =0;


        var input2 = [{
            "id": 1,
            "levelCode":     "<br> <span id=\"place1\" ondrop=\"drop(event)\" ondragover=\"allowDrop(event)\" class=\"place\">&emsp;&emsp;</span>"
        }]

       var input = [{
            "id": 1,
            "levelDifficulty": 1,
            "levelPosition": 1,
            "levelNumber": "1A",
            "levelName": "Hello World!",
            "levelDescription": "Put a child friendly description of level here (Build Hello World)",
            "levelCode": "public class Hello{<br> public static void main() {<br> System.out.println(\"Hello World \") <span id=\"place1\" ondrop=\"drop(event)\" data-wow=\"\" ondragover=\"allowDrop(event)\" class=\"place\">&emsp;&emsp;</span><br><span id=\"place2\" ondrop=\"drop(event)\" data-wow=\"\" ondragover=\"allowDrop(event)\" class=\"place\">&emsp;&emsp;</span>}",
            "timer": 600,
            "chances": 5,
            "solution": [{
                "answerPosition": "place1",
                "answerCodeSnippet": ";",
                "id": 5
            },{
                "answerPosition": "placeD",
                "answerCodeSnippet": ".",
                "id": 6
            },{
                "answerPosition": "place2",
                "answerCodeSnippet": "hello",
                "id": 7
            }
            ]
        }];

        console.log(input);
        function allowDrop(event) {
            event.preventDefault();
        }

        function drag(event) {
            event.dataTransfer.setData("text", event.target.id);
        }

        function shuffle(a) {
            var j, x, i;
            for (i = a.length - 1; i > 0; i--) {
                j = Math.floor(Math.random() * (i + 1));
                x = a[i];
                a[i] = a[j];
                a[j] = x;
            }
            return a;
        }

        function changeChoice(){
            var choices = document.getElementsByClassName("drag");
            document.getElementById("selection").innerHTML = "";
            var answers = input[0].solution;

            for (var i=0; i< answers.length;i++) {
                document.getElementById("selection").innerHTML = document.getElementById("selection").innerHTML +"<div id=\"drag"+i+"\" draggable=\"true\" ondragstart=\"drag(event)\" class=\"drag\">1</div>"

            }

            var shuffAnswers = shuffle(answers);
            var snippet;
            for (var j=0;j<choices.length;j++){
                snippet = shuffAnswers[j].answerCodeSnippet;
                ansPos = shuffAnswers[j].answerPosition;
                choices[j].innerHTML = snippet;
                choices[j].dataset.attr1 = ansPos;
            }
        }

        function changePage(){
            count = 0;
            document.getElementById("text").innerHTML = input[0].levelCode;
        }

        function drop(event) {
            event.preventDefault();
            if( "place" == event.target.className) {
                var data = event.dataTransfer.getData("text");
                event.target.innerHTML = "&emsp;"+document.getElementById(data).innerHTML+"&emsp;";
            }
            if("missing" == event.target.className){
                event.target.value = event.dataTransfer.getData("text");
            }
        }

        function isCorrect(){
            count++;
            var answers = input[0].solution;
            for (var i=0; i< answers.length;i++) {
                if (answers[i].answerPosition != "placeD"){
                    if(document.getElementById(answers[i].answerPosition).innerHTML != "\u2003"+answers[i].answerCodeSnippet+"\u2003"){
                        return ("There was a mismatch with your answers")
                    }
                }

            }
                if (count>1) {return ("All of your answers was correct! it only took you "+count+ " tries.");}
                else {return ("All of your answers was correct! it only took you "+count+ " try.");}
        }

        function getElement(event){
            var placements = document.getElementsByClassName("place");
            var JsonArray = [];
            for(var i =0;i<placements.length;i++) {
                var JsonObject = JSON.parse(text);
                if (document.getElementById(placements[i].id).hasChildNodes()) {
                    JsonObject.value = (document.getElementById(placements[i].id).firstChild.textContent);
                    JsonObject.placement = placements[i].id;
                }
                else {
                    JsonObject.value = "";
                    JsonObject.placement = "";
                }
                JsonArray.push(JsonObject);
            }
        }
    </script>
</head>
<body style="background-color: #b5cdce;">
<h2></h2>

    <div id="selection" ondrop="drop(event)" ondragover="allowDrop(event)" class="selection">
    selectable option here
        <div id="drag1" draggable="true" ondragstart="drag(event)" class="drag">1</div>
        <div id="drag2" draggable="true" ondragstart="drag(event)" class="drag">2</div>
        <div id="drag3" draggable="true" ondragstart="drag(event)" class="drag">3</div>
        <div id="drag4" draggable="true" ondragstart="drag(event)" class="drag">4</div>
        <div id="drag5" draggable="true" ondragstart="drag(event)" class="drag">5</div>
        <div id="drag6" draggable="true" ondragstart="drag(event)" class="drag">6</div>
        <div id="drag7" draggable="true" ondragstart="drag(event)" class="drag">7</div>
        <div id="drag8" draggable="true" ondragstart="drag(event)" class="drag">8</div>
        <div id="drag9" draggable="true" ondragstart="drag(event)" class="drag">9</div>
        <div id="drag10" draggable="true" ondragstart="drag(event)" class="drag">10</div>


</div>

<div id="mainBody">

    <p id="text" class="text">
            Finish the following code to make "myInt" equal 10
        <br>
        <br>
        <br> public static void main{
        <br>myInt = 5;
        <br>for(int i = 0; i < <span id="place1" ondrop="drop(event)" ondragover="allowDrop(event)" class="place">&emsp;&emsp;</span> ;i++)
        <br>&emsp;{ <span id="place2" ondrop="drop(event)" ondragover="allowDrop(event)" class="place">&emsp;&emsp;</span>
        <br>&emsp;&emsp;myInt++;
        <br>&emsp;}
        <br>}
    </p>

    <button id="changeChoice" class="button" style="left: 50%;" onclick="changeChoice()">changeChoice</button>
    <button id="changePage" class="button" onclick="changePage()">Change</button>
    <button id="submit" class="button" style=" top: 70%"onclick="console.log(isCorrect())">Submit</button>
</div>
</body>
</html>
